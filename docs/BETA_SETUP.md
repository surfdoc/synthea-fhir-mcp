# Synthea FHIR MCP Server - Beta Tester Setup Guide

## Overview
This MCP (Model Context Protocol) server provides Claude Desktop with access to a synthetic patient database containing 117 test patients with realistic medical records. The data is generated using Synthea and stored in a PostgreSQL database following FHIR standards.

## Quick Setup for Beta Testers

### Step 1: Install Claude Desktop
1. Download Claude Desktop from [claude.ai](https://claude.ai)
2. Install and launch the application

### Step 2: Configure MCP Connection

1. Open your Claude Desktop configuration file:
   - **macOS**: `~/Library/Application Support/Claude/claude_desktop_config.json`
   - **Windows**: `%APPDATA%\Claude\claude_desktop_config.json`

2. Add the Synthea FHIR server to the `mcpServers` section:

```json
{
  "mcpServers": {
    "synthea-fhir": {
      "command": "npx",
      "args": [
        "-y",
        "supergateway",
        "--sse",
        "https://synthea-mcp-1095016408887.us-central1.run.app/sse"
      ]
    }
  }
}
```

3. Save the file and restart Claude Desktop

### Step 3: Verify Connection
Once Claude Desktop restarts, you should see "synthea-fhir" in the MCP connections list. The server provides access to synthetic patient data - no real patient information is stored.

## Getting Started - IMPORTANT!

### ðŸš€ First Thing to Ask Claude:
**"Run the get_started tool to learn about the FHIR database structure"**

This will teach Claude how to properly query the JSONB data structure. Without this, Claude may struggle to understand how the data is stored.

## Available Tools and Capabilities

### 1. Database Overview
Ask Claude: "What's in the Synthea database?" or "Run get_started"

### 2. Patient List
Ask Claude: "Show me the first 10 patients in the database"

### 3. Patient Details
Ask Claude: "Get a complete summary for patient [patient_id]"

### 4. Search by Condition
Ask Claude: "Find all patients with diabetes"
Ask Claude: "Which patients have hypertension?"

### 5. Patient Medical Records
- "What conditions does patient [id] have?"
- "What medications is patient [id] taking?"
- "Show me recent observations for patient [id]"

### 6. Advanced Queries
Ask Claude to run SQL queries directly:
- "Run a query to find the most common conditions"
- "Show me patients with multiple chronic conditions"
- "What's the age distribution of patients?"

## Database Contents

The test database contains **117 synthetic patients** with:
- **79,013** observations (vital signs, lab results)
- **22,216** procedures
- **9,200** encounters
- **6,792** medication requests
- **4,554** conditions
- **1,623** immunizations
- **88** allergy intolerances

## Example Questions for Claude

### Basic Queries
- "Show me statistics about the FHIR database"
- "List 10 patients with their demographics"
- "How many patients are in the database?"

### Clinical Queries
- "Find patients with Type 2 Diabetes"
- "Show me patients taking lisinopril or losartan"
- "Which patients received COVID-19 vaccinations?"
- "Find patients with both diabetes and hypertension"

### Population Health
- "What are the most common conditions?"
- "Show me the distribution of conditions by gender"
- "What percentage of patients received a influenza vaccination?"

### Patient-Specific
- "Get full medical history for patient 229a1e6d-1714-f0cd-8253-a8729632291e"
- "What medications is patient 59844213-b884-17cb-59e9-c07a73a06f41 currently taking?"
- "Show me all diagnoses for patient 0d7f673c-e7ef-53d0-f561-1a7e9dd15d0c"
- "Get encounters for patient 229a1e6d-1714-f0cd-8253-a8729632291e"
- "Show me procedures for patient 59844213-b884-17cb-59e9-c07a73a06f41"

## Technical Details

### Server Information
- **Endpoint**: https://synthea-mcp-1095016408887.us-central1.run.app/sse
- **Protocol**: MCP over Server-Sent Events (SSE)
- **Database**: PostgreSQL with FHIR schema
- **Data**: Synthetic patient data (no real patient information)
- **Authentication**: None required - the server handles database access


## Troubleshooting

### Connection Issues
1. Make sure Claude Desktop is fully closed before editing the config file
2. Check that the JSON syntax is correct (no missing commas or brackets)
3. Restart Claude Desktop after making changes

### If Claude Can't Find the Tools
- Ask Claude: "What MCP servers are connected?"
- Check the MCP indicator in Claude Desktop
- Try restarting Claude Desktop

### Error Messages
If you see "Request timed out":
- The server may be starting up (wait 30 seconds and try again)
- Check your internet connection

## Privacy & Security

- âœ… **All data is synthetic** - generated by Synthea
- âœ… **No real patient information**
- âœ… **Read-only access** - cannot modify data
- âœ… **Secure connection** over HTTPS

## Support

For issues or questions:
1. Check the [GitHub repository](https://github.com/your-repo/mcp-postgres)
2. Verify your Claude Desktop configuration
3. Ensure you have internet connectivity

## Advanced Usage

### Custom SQL Queries
You can ask Claude to run custom SQL queries:
```sql
-- Example: Find top 10 most common conditions
SELECT
    resource->'code'->'coding'->0->>'display' as condition,
    COUNT(*) as patient_count
FROM fhir.condition
GROUP BY condition
ORDER BY patient_count DESC
LIMIT 10
```

### FHIR Resource Access
The database follows FHIR R4 standards with tables for:
- `fhir.patient`
- `fhir.observation`
- `fhir.condition`
- `fhir.procedure`
- `fhir.medication_request`
- `fhir.encounter`
- `fhir.immunization`
- `fhir.allergy_intolerance`

## Beta Feedback

As a beta tester, your feedback is valuable! Please report:
- Which queries work well
- Any errors or timeouts
- Feature requests
- Use cases you'd like to see supported

---

**Ready to start?** Copy the configuration above, add it to your Claude Desktop config file, restart Claude, and start asking questions about the synthetic patient data!